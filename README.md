### Результат
Результат можно просто просмотреть в `out/train_vel.mov`
[![Посмотреть видео](https://github.com/IlyaKodua/train_test/blob/main/out/train_vel.mov))
### Запуск Docker Compose

Для сборки и запуска контейнеров используется команда:
```
docker-compose up --build
```

### Копирование видео из контейнера

После завершения работы алгоритма видео можно скопировать из контейнера с помощью следующей команды:
```
docker cp train_velocity:/workspace/out/train_vel.mov train_vel.mov
```

### Описание алгоритма

Алгоритм обработки видео реализован в файле `calculator.py`, при этом основные параметры управления процессом вынесены в отдельный конфигурационный файл. Работа алгоритма происходит поэтапно:

1. Выбор кадра: Из загруженного видеофайла извлекается очередной кадр.
   
2. Анализ движения: Для оценки перемещений объектов на изображении используется метод расчета оптического потока по алгоритму Гуннара Фарнебека. Результатом является набор скоростей пикселей.

3. Фильтрация данных: Чтобы устранить влияние неподвижных элементов сцены, производится фильтрация скоростей, оставляя лишь те, которые превышают 0.7 от максимальной величины скорости.

4. Среднее значение: Оставшиеся скорости усредняются и передаются в фильтр Калмана.

5. Визуализация результата: На основании обработанных данных через фильтр Калмана строится и отображается вектор скорости.

### Настройки конфигурации

Конфигурационный файл включает несколько ключевых параметров, позволяющих адаптировать процесс под конкретные задачи:

- `framestep` — управляет шагом обработки кадров, определяя частоту анализа.
  
- `inputvideopath` — указывает путь к исходному видеофайлу, который будет анализироваться.
  
- `outdir` — определяет директорию, в которую будут сохраняться результаты обработки.
  
- `outputvideoname` — устанавливает имя итогового видеофайла.
  
- `output_video_name` – имя файла результирующего видео.
